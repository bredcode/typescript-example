1번

```ts
export function isNumber(x: unknown): x is number {
  return typeof x === "number" && Number.isFinite(x);
}

export function squareIfNumber(x: unknown) {
  if (isNumber(x)) return x * x;
  return 0;
}
```

2번

```ts
export function isString(x: unknown): x is string {
  return typeof x === "string";
}

export function lengthOrMinus1(x: unknown) {
  return isString(x) ? x.length : -1;
}
```

3번

```ts
export function isStringArray(x: unknown): x is string[] {
  return Array.isArray(x) && x.every((v) => typeof v === "string");
}

export function joinIfStringArray(x: unknown) {
  if (isStringArray(x)) return x.join(",");
  return "";
}
```

4번

```ts
type Cat = { kind: "cat"; meow: () => void };
type Dog = { kind: "dog"; bark: () => void };
type Pet = Cat | Dog;

export function isCat(p: Pet): p is Cat {
  return p.kind === "cat";
}

export function isDog(p: Pet): p is Dog {
  return p.kind === "dog";
}

export function usePet(p: Pet) {
  if (isCat(p)) return p.meow();
  if (isDog(p)) return p.bark();
}
```

```ts
type Cat = { kind: "cat"; meow: () => void };
type Dog = { kind: "dog"; bark: () => void };
type Pet = Cat | Dog;

export function isCat(p: Pet): p is Cat {
  return "meow" in p; // p에 meow 속성이 있으면 Cat으로 좁혀짐
}

export function isDog(p: Pet): p is Dog {
  return "bark" in p; // p에 bark 속성이 있으면 Dog으로 좁혀짐
}

export function usePet(p: Pet) {
  if (isCat(p)) {
    p.meow(); // 여기서 p는 Cat
  } else if (isDog(p)) {
    p.bark(); // 여기서 p는 Dog
  }
}
```

5번

```ts
type Square = { kind: "square"; size: number };
type Circle = { kind: "circle"; r: number };
type Shape = Square | Circle;

export function isSquare(s: Shape): s is Square {
  return s.kind === "square";
}

export function area(s: Shape) {
  if (isSquare(s)) return s.size * s.size;
  return Math.PI * s.r * s.r;
}
```

6번

```ts
export function isNum(x: unknown): x is number {
  return typeof x === "number";
}
export function isStr(x: unknown): x is string {
  return typeof x === "string";
}

export function processValue(x: string | number) {
  if (isStr(x)) return x.slice(0, 2);
  if (isNum(x)) return x + 1;
  // 실제로 여긴 안 옴 (타입상)
  return x as never;
}
```

7번

```ts
type User = { id: string; name?: string };

export function hasName(u: User): u is User & { name: string } {
  return typeof u.name === "string";
}

export function greet(u: User) {
  return hasName(u) ? `Hello, ${u.name}` : "Hello";
}
```
